# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VM –≤ Yandex Cloud (< 10 –º–∏–Ω—É—Ç —Ç–µ—Å—Ç–∞)

## –í—ã–±–æ—Ä –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞:

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (CPU):**
- **vCPU**: 2-4 —è–¥—Ä–∞
- **RAM**: 4-8 GB
- **–î–∏—Å–∫**: 20-30 GB SSD
- **OS**: Ubuntu 22.04 LTS
- **–ó–æ–Ω–∞**: –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à—É—é –∫ –≤–∞–º

**–ü—Ä–∏–º–µ—Ä—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º:**
- `standard-v2` (2 vCPU, 4 GB RAM) - ~150‚ÇΩ/—á–∞—Å
- `standard-v3` (4 vCPU, 8 GB RAM) - ~300‚ÇΩ/—á–∞—Å

### –®–∞–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è VM:

1. **–ó–∞–π–¥–∏—Ç–µ –≤ [Yandex Cloud Console](https://console.cloud.yandex.ru/)**
2. **Compute Cloud ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã ‚Üí –°–æ–∑–¥–∞—Ç—å**
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –ò–º—è: `quick-test-vm`
   - –ó–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à—É—é
   - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: `standard-v2` –∏–ª–∏ `standard-v3`
   - –û–±—Ä–∞–∑: `Ubuntu 22.04 LTS`
   - –î–∏—Å–∫: 20-30 GB SSD
   - –ü—É–±–ª–∏—á–Ω—ã–π IP: –≤–∫–ª—é—á–∏—Ç—å
   - SSH –∫–ª—é—á: –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

4. **–°–æ–∑–¥–∞—Ç—å VM**

## –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VM

```bash
ssh ubuntu@<PUBLIC_IP>
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo apt install -y python3.10 python3-pip python3-venv git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/Aris12122/Iterative-Expert-Guided-Fine-Tuning.git
cd Iterative-Expert-Guided-Fine-Tuning

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install --upgrade pip
pip install -r requirements.txt
```

### 3. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (< 10 –º–∏–Ω—É—Ç)

```bash
# –ó–∞–ø—É—Å–∫ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞
python scripts/quick_test_vm.py
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±—É—á–∏—Ç –º–æ–¥–µ–ª—å –Ω–∞ 100 –ø—Ä–∏–º–µ—Ä–∞—Ö (1 —ç–ø–æ—Ö–∞)
- –û—Ü–µ–Ω–∏—Ç –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ 6 –ø—Ä–∏–º–µ—Ä–∞—Ö
- –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | 2-3 –º–∏–Ω—É—Ç—ã |
| –û–±—É—á–µ–Ω–∏–µ (100 –ø—Ä–∏–º–µ—Ä–æ–≤, 1 —ç–ø–æ—Ö–∞) | 2-3 –º–∏–Ω—É—Ç—ã |
| –û—Ü–µ–Ω–∫–∞ | 30 —Å–µ–∫—É–Ω–¥ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 30 —Å–µ–∫—É–Ω–¥ |
| **–ò–¢–û–ì–û** | **5-7 –º–∏–Ω—É—Ç** |

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `setup_vm.sh` –Ω–∞ VM:

```bash
#!/bin/bash
set -e

echo "üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è VM..."

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
sudo apt install -y python3.10 python3-pip python3-venv git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ)
if [ ! -d "Iterative-Expert-Guided-Fine-Tuning" ]; then
    git clone https://github.com/Aris12122/Iterative-Expert-Guided-Fine-Tuning.git
fi

cd Iterative-Expert-Guided-Fine-Tuning

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
if [ ! -d "venv" ]; then
    python3 -m venv venv
fi

source venv/bin/activate

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade pip
pip install -r requirements.txt

echo "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: python scripts/quick_test_vm.py"
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
chmod +x setup_vm.sh
./setup_vm.sh
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
================================================================================
üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–ë–£–ß–ï–ù–ò–Ø
================================================================================
  val_accuracy: 0.XXXX
  val_expected_correctness: 0.XXXX
================================================================================

================================================================================
üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
================================================================================
–í—Å–µ–≥–æ –ø—Ä–∏–º–µ—Ä–æ–≤: 6
–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: X
–¢–æ—á–Ω–æ—Å—Ç—å: XX.XX%
================================================================================

‚è±Ô∏è –û–ë–©–ï–ï –í–†–ï–ú–Ø: XXX.X —Å–µ–∫—É–Ω–¥ (X.X –º–∏–Ω—É—Ç)
‚úÖ –£–ª–æ–∂–∏–ª–∏—Å—å –≤ –ª–∏–º–∏—Ç 10 –º–∏–Ω—É—Ç!
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –µ—â–µ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–ª–æ–∂–∏—Ç—å—Å—è –≤ 5 –º–∏–Ω—É—Ç, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `quick_test_vm.py`:

```python
config.dataset.max_samples = 50  # –ï—â–µ –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö
config.training.batch_size = 32  # –ë–æ–ª—å—à–µ batch size
config.training.eval_steps = 10  # –†–µ–∂–µ –æ—Ü–µ–Ω–∫–∞
```

## –£–¥–∞–ª–µ–Ω–∏–µ VM –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞

**–í–∞–∂–Ω–æ**: –ù–µ –∑–∞–±—É–¥—å—Ç–µ —É–¥–∞–ª–∏—Ç—å VM –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞, —á—Ç–æ–±—ã –Ω–µ –ø–ª–∞—Ç–∏—Ç—å –ª–∏—à–Ω–µ–µ!

```bash
# –í Yandex Cloud Console:
# Compute Cloud ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã ‚Üí –í—ã–±—Ä–∞—Ç—å VM ‚Üí –£–¥–∞–ª–∏—Ç—å
```

–ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
```bash
yc compute instance delete quick-test-vm
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ —Å Python:
- –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ `Ubuntu 22.04 LTS` —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Python

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–≤–µ–ª–∏—á—å—Ç–µ RAM –¥–æ 8 GB
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ `batch_size` –¥–æ 8

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏

**–†–µ—à–µ–Ω–∏–µ**:
- –£–º–µ–Ω—å—à–∏—Ç–µ `max_samples` –¥–æ 50
- –£–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `experiment.evaluate()`)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞:

1. **–£–≤–µ–ª–∏—á—å—Ç–µ –¥–∞–Ω–Ω—ã–µ**: —É–±–µ—Ä–∏—Ç–µ `max_samples` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ–ª—å—à–µ
2. **–ë–æ–ª—å—à–µ —ç–ø–æ—Ö**: —É–≤–µ–ª–∏—á—å—Ç–µ `num_epochs` –¥–æ 3-5
3. **–ü–æ–ª–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
4. **GPU —Ç–µ—Å—Ç**: —Å–æ–∑–¥–∞–π—Ç–µ VM —Å GPU –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

